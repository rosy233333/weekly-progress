# 毕设任务目标和安排

时间：2024/1/5

以下对毕设任务的理解基于学长的[design-v6](https://github.com/oscourse-tsinghua/openingreport-zfliang2023/blob/dev/design-v6.md)。

## 任务目标分级

调度器需要实现的功能分为以下几个等级：

### 简化

#### 功能描述

- 仅有任务调度、中断处理两个功能
- 不涉及进程切换，也不涉及多个`PScheduler`的缓存和切换
- 硬件中只有一个`PScheduler`实例

#### 任务进度

本阶段完成后，可以大致达到毕设的要求。

#### 任务分解

- 学习相关知识
- 为调度器硬件实现中断处理机制
- 设计MMIO内存布局
- 为调度器硬件编写功能代码，并通过MMIO提供对功能代码的访问。

#### 难点

QEMU硬件开发的知识学习与应用，包括中断处理、MMIO、QOM等内容。

### 基础

#### 功能描述

对“简化”新增功能：

- 在硬件中设置多个`PScheduler`实例
- 支持进程切换，支持多个`PScheduler`的缓存和切换

#### 任务进度

本阶段完成后，可以达到毕设的要求。

#### 任务分解

- 扩展硬件以放入多个`PScheduler`
- 编写进程切换相关（包括`PScheduler`的切换）的功能代码，实现MMIO

#### 难点

缓存和切换机制的实现。

阅读design-v6时的一个问题：进程切换必须在内核态进行吗？（因为需要在内核态保存和恢复`PScheduler`）

### 扩展

#### 功能描述

对“基础”新增功能：

- 支持IPC
- 支持异步系统调用

#### 任务进度

本阶段完成后，实现的调度器即为design-v6中描述的`ATS-INTC`硬件。

#### 任务分解

- 学习相关知识（IPC、用户态中断？、异步系统调用的设计和已有实现）
- 实现所需功能【因为对这个方面不太熟悉，目前无法继续分解】

#### 难点

新增功能的体量较大，且需要继续学习相关知识

## 任务时间安排
|时间|任务|
|-|-|
|2024年1~2月|完成“简化”阶段的开发工作。|
|2024年3月上旬~中旬|完成“基础”阶段的开发工作。|
|2024年3月下旬~4月中旬|进行实验|
|2024年4月下旬~5月上旬|撰写和完善论文|

毕设期间，若有余力，则进行“扩展”阶段的开发。




