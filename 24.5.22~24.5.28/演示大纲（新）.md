# 演示大纲

时间：2024/5/24

## 1. 介绍项目和演示程序

本项目为对QEMU模拟器和ArceOS系统的修改版，通过在QEMU模拟硬件层面添加协程调度和外部中断处理的功能，提升系统的任务调度性能和网络性能。

为了展示该系统的功能和性能，我们编写的测试程序包含两个测试项目：第一个测试项目创建多个线程或协程进行并行计算，并验证计算结果的正确性。第二个测试项目运行一个TCP服务器，创建任务处理建立的连接，接收客户端发送的请求，执行计算任务后返回结果。

为了节省时间，系统的镜像已经预先编译好，可以直接运行。编译的镜像分为功能测试版本和性能测试版本，前者有更详细的输出，后者进行更大规模的测试并得出统计结果。

## 2. 功能测试

### 任务调度测试

- 成功创建了线程/协程，（由各个线程的创建和计算完成的打印顺序可以看出）并行完成了计算；
- 并行计算结果与串行（单线程）结果相等，计算正确。

### 网络测试

- 客户端成功建立连接、成功发送请求、成功接收响应。
- 服务端成功建立连接、成功读取客户端的请求、成功向客户端发送响应。

## 3. 性能测试

### 任务调度测试

创建240个任务，对840000个数据进行并行计算。共进行10轮测试，测量计算时间，统计平均数和方差。

原系统的执行时间基本在（60）左右，偶尔会有（>100）的执行时间。

本项目实现的系统执行时间基本在（30~50）左右，（更低概率有（）的执行时间）。

记录两个系统各自的平均数，本项目系统的执行时间更短。

### 网络测试

客户端创建40个连接，每个连接发送20个请求，每个请求长度为2048字节，需要计算256个数据。共进行10轮测试，统计服务器每秒处理的请求数量代表吞吐量，统计平均数和方差。

原系统的吞吐量在（3000）~（4000）的范围中。

本项目的系统的吞吐量在（5000）~（10000）的范围中。

本项目的系统的平均吞吐量更大。

### 备注

讲了一遍下来，时间到了8分钟，超过得较多，之后需要简化该流程，比如在介绍测试程序的同时进行原系统的功能测试。