# 当前工作与学长工作的关系

通过理清当前工作与学长已有工作的关系，确定当前开发阶段完成后，如何以本阶段工作和学长工作为基础推进。

## 当前工作

通过以vDSO实现的用户态-内核态代码数据共享机制，使用io_uring的结构，开发一个异步IPC与系统调用的框架。详见[工作计划](../25.7.10~25.7.16/vdso_iouring工作计划.md)

采用vdso的好处：让相关代码可在用户态和内核态执行，因此，

- 用于系统调用的机制可以方便地推广到IPC。
- 可以兼容宏内核或微内核系统（通过IPC实现系统调用）

## ldh的工作

ldh的工作：微内核系统Rel4中的异步IPC和系统调用框架，采用协程作为任务单位，基于用户态中断实现通知机制，减少内核转发。

关系：二者均为异步IPC和系统调用框架，在功能上相似（原本我认为系统调用和IPC的统一可以作为我的创新点，但发现ldh的工作中也有这点。）。我的工作采用vDSO和io-uring的好处可能有以下方面：方便用户态和内核态的代码共享；方便从微内核移植到宏内核（或相反）。尚不清楚是否可能在性能上有优势。因此，如果在此基础上推进，则需要提出更明显的创新点或达到性能优势。

在ldh的基础之上实现中断方式（已有）和轮询方式（我当前工作）的平滑切换，iouring+用户态中断，延迟取小，吞吐量取大（可能思路1）

向老师提出的较完整方向：整合ldh的工作（riscv上）和已有的arm上的微内核工作作为基础，再在其上实现几个可能思路

## zfl的工作

zfl的工作：软硬协同的调度器和中断处理机制，通过硬件实现任务调度、中断处理、IPC的结合，降低中断和IPC对任务调度的影响。同时实现用户态和内核态的统一调度。

关系：当前工作缩小了系统调用与IPC的差距，因此可以在zfl已有工作（硬件实现）的基础上，将系统调用也纳入硬件处理的范围中。（可能思路2）

或者，可以考虑能否用软件实现zfl的工作，使其仍具有如上的优势（降低中断和IPC对任务调度的影响、实现用户态和内核态的统一调度）。此时，vDSO可以用于用户态和内核态统一调度（这部分zfl已经完成？），而IPC相关机制也可以使用我的工作实现。（可能思路3）
