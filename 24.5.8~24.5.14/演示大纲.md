# 演示大纲

时间：2024/5/7

## 任务调度运行演示

使用修改后的ArceOS系统运行任务调度测试程序，其会将一个计算任务（计算数组内每个元素的平方根的和）拆分给多个协程，汇总结果后，将其与单个线程计算的结果比较。

命令：`make A=apps/task/parallel LOG=error ARCH=riscv64 SMP=4 run`

预期结果：

1. 命令行输出了各个线程计算的中间结果。
2. 汇总结果与单线程计算结果相等。（两个结果都会输出在控制台上）

## 网络运行演示

在修改后的ArceOS系统上运行简单的网络服务器，在另一个终端上运行客户端，其会向网络服务器建立多个连接并发送请求。

服务端命令：`make A=apps/net/echoserver LOG=error ARCH=riscv64 NET=y SMP=4 run`

客户端命令：`[在客户端项目目录下]cargo run`

预期结果：

1. 客户端打印出了40次连接的响应时间。

2. 服务端打印出了40个连接正常关闭的信息。 

## Redis运行演示

在修改后的ArceOS系统上运行Redis服务端，在另一个终端上运行客户端。

服务端命令：

`make A=apps/c/redis/ LOG=error NET=y BLK=y ARCH=riscv64 SMP=4 run`

客户端执行的命令：

1. 手动执行命令

```
redis-cli -p 5555
SET key1 1
GET key1
```

2. 自动化测试

`redis-benchmark -p 5555 -n 100 -q -c 50`

预期结果：

1. （服务端）Redis正常启动，出现了"Ready to accept connections"输出

1. （手动执行命令的情况）客户端命令行有相应的输出

2. （自动化测试的情况）测试运行完成，测出了每个命令的执行速度，不会卡死

目前存在的问题：启动Redis时，有可能出现panic。不过，若启动时未触发panic，则之后都可以正常运行，不会再出错。