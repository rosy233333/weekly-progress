# Resource Allocation and Task Scheduling in Fog Computing and Internet of Everything Environments: A Taxonomy, Review, and Future Directions阅读笔记

时间：2024/10/15

## 摘要

**综述对象**：调度算法、优化指标、评估工具

**评估环境**：雾计算和万物互联（Internet of Everything）的环境，具有资源受限、异构、动态、不确定的特点。

**本文工作**：

- 回顾雾计算和万物互联的范式
- 描述该环境下的优化指标
- 回顾、分类、比较已有的调度算法，特别关注其中的基于机器学习和模糊逻辑的
- 展示不同研究中用到的各种模拟环境
- 讨论仍然存在的问题和未来研究方向

## 介绍

### 雾计算

在物联网中，终端设备计算能力不足，因此需要额外的计算节点。而云计算/中心化物联网因为数据传输路径太长，导致了带宽消耗、高延迟、网络拥塞、安全等问题。

雾计算在中心和终端间增加了一层“雾层”并在其中设置计算节点。

![](../图片/屏幕截图%202024-10-15%20234250.png)

雾层内部分为三层：上层是计算节点和它们的网络设备，中层是局域网，下层是城域网、广域网

雾层计算资源的特点：资源和能源受限、异构。使用它们进行计算的最大挑战是资源和任务的调度。

### 雾计算中涉及的三种调度

- 资源分配：任务在节点间的分配
- 任务调度：任务在节点内的排序
- 工作流调度：考虑任务的依赖关系，任务节点间分配和全局排序

### 雾计算中调度的挑战

- 外层雾节点的特性：异构、资源受限、能源受限、分布式结构
- 雾计算应用的特性：具有不同的性能要求，例如实时任务和延迟可容忍任务。
- 随机的环境：任务的到达速度、持续时间、资源需求都会随机分布，且无法提前得知。
- 可移动性：时间和距离的限制、用户偏好的满足

### 已有的综述工作

![](../图片/屏幕截图%202024-10-16%20104340.png)

作者总结前人研究的不足大多是综述不够全面

### 本文动机和目标

之前的研究中大部分涉及针对基于单指标/双指标优化的调度算法。但现在出现了更多在多个指标上联合优化的算法；之前的研究对基于机器学习的算法也很少涉及。因此本文更多回顾了这类方法，并将其与传统方法比较。

此外，本文还对雾计算的背景、特性、结构、挑战做了介绍。

### 本文工作

见上文“本文工作”

### 文章组织

- 第2章：雾计算环境下调度的优化指标
- 第3章：任务调度、资源分配、工作流调度的分类
- 第4章：讨论（用于评估的？）技术
- 第5章：问题和挑战
- 第6章：总结

![](../图片/屏幕截图%202024-10-21%20095137.png)

## 优化指标

使用单目标、双目标或多目标优化函数来衡量调度算法在一个或多个优化指标上的表现。

本文讨论的优化指标如下图所示：

![](../图片/屏幕截图%202024-10-21%20095316.png)

### 性能指标

- 时延：又称响应时间，在雾计算中包括传输时延和计算时延两部分。
- 执行时间：系统执行该任务花费的CPU时间，不包括等待I/O或等待其它任务的时间。
- 完工时间（makespan）：完成一个工作流中的所有任务所需的时间。
- 吞吐量：单位时间内完成任务的数量。
- 截止时间（deadline）：从任务提交时刻到任务必须完成的时刻之间的时间长度。（这里似乎说截止时间是duration，但我们一般理解的截止时间都是instant？还是两种理解其实都可以？）

### 资源利用

对于调度算法而言，目标是尽可能提高系统的资源利用率。

任务调度算法涉及到这些资源的分配：

- 处理器
- 内存
- 网络带宽：当网络拥塞时，通过将部分工作负载迁移到临近雾节点上以降低网络带宽（？）

### 能源消耗

任何设备在空闲状态和工作状态下都会消耗能源，工作状态下消耗得更多。

### 资金花费

包括了使用云资源/雾资源的费用、网络带宽的费用和能源的费用。

## 调度算法的分类

在前文介绍的三种调度中，此处介绍的调度算法主要涉及资源分配和任务调度。

将调度算法分类为：传统、整数线性规划（ILP）、启发式、超启发式、混合启发式、元启发式、基于模糊逻辑、基于强化学习、基于深度强化学习。

![](../图片/屏幕截图%202024-10-21%20150932.png)

### 传统算法

传统算法都是静态算法，关于任务和雾节点的信息在调度前已知。

#### 先来先服务（FCFS）

用于单机器的任务调度算法

#### 轮转（RR）

用于单机器的任务调度算法

其中提到了CPU-burst，是一种综合考虑CPU利用率和CPU时间来计算应用使用的CPU资源的技术。其会类似于RR算法，每次给应用分配一定的CPU资源，因此可能出现应用的CPU资源耗尽，但RR算法的时间片还未结束的情况。该情况下，会抢占任务，将其放在队首，且不重置剩余时间。

#### Min-Min

用于多机器的资源分配算法

优先给最小的任务分配机器。会导致大任务的等待时间过长。

    Min-Min算法是一种实现起来很简单的算法，算法的执行时间也很快。算法的思想是首先映射小的任务，并且映射到执行快的机器上。

    执行过程为：计算要参与映射事件的每个任务在各个机器上的期望完成时间，找到每个任务的最早完成时间及其对应的机器；从中找出具有最小最早完成时间的任务，将该任务指派给获得它的机器；指派完成后，更新机器期望就绪时间并将已完成映射的任务从任务集合中删除。重复上面的过程，直到所有的任务都被映射完。

    “任务在机器上的期望完成时间”与任务大小、任务与机器的亲和度，以及机器何时可以就绪有关。

#### Max-Min

用于多机器的资源分配算法

优先给最小的任务分配机器。会导致大任务的等待时间过长。

```
    Max-Min算法比较的是任务在各个机器上的完成时间的最小值。再将每个任务的最短完成时间进行比较，取其中最大值。

    因此Max-Min算法只是使大任务优先执行，其仍会倾向于将任务分配到亲和度较高、较早达到就绪（或已经就绪）的机器上。
```

#### 最小完成时间（MCT）

用于多机器的资源分配算法

以任意的顺序给每个任务分配机器；每次分配时，将任务分配到其完成时间最短的机器上。

#### 优先级调度算法

用于单机器的任务调度算法

例如：短作业优先（SJF）就是一种优先级调度算法。

#### 已有的实验工作

![](../图片/屏幕截图%202024-10-21%20161657.png)

该表格中，着重比较了不同实验的调度类型、比较指标、实验环境和工具。

[44] 证明了在带宽使用、时延、能源消耗的角度，将计算任务放在边缘节点优于放在云端。

[45] 提出了优先级调度的资源效率算法（Prioritized Efficient Resource Algorithm，PERA）

[47] 提出了加权的轮转算法（weighted round-robin，WRR）

#### 总结

因为传统算法都是静态算法，因此更适合各种任务相差不大的情况。传统算法并不适配难以预测的雾计算环境和差别较大的工作负载。

### 基于整数线性规划（ILP）或混合整数线性规划（MILP）的算法

#### 资源分配算法

Farooq等人的Min-CCV和Min-V：使用混合整数非线性规划，找出多目标优化的调度方案。Min-CCV最小化计算、通信和未能按时的惩罚、Min-V最小化未能按时的惩罚。其不足是，当设备数量增长时，消耗的能量也会增加。（大概是运算量增大了？）

Aburukba等人使用自定义的遗传算法在合理的时间内求解调度问题。

Martinez等人使用混合整数非线性规划解决雾节点的基础结构设计问题，从而最小化延迟敏感型物联网应用的部署开销。该算法具有可扩展性。

Santos等人使用混合整数线性规划，在多个优化目标的情况下，以微服务实例作为调度对象，将它们分配到雾计算节点上。

#### 工作流调度算法

Guevara和Fonseca提出了用于任务在异构节点上分配的CASSIA-INT和CASSIA-RR算法。CASSIA-INT使用整数线性规划，而CASSIA-RR使用随机舍入。调度器使用工作流、标签、资源可用性作为调度的依据。调度目标是最小化完工时间和任务执行时间

总体上说，基于线性规划的算法比传统方法更优，但其缺点是无法考虑非线性因素。

### 启发式算法

启发式算法的特点：在调度性能优化方面灵活、适应性好，可以在短时间内提供较优解。

大部分启发式算法是贪心的，因此容易限于局部最优。

Jamil et al. [58]：具有较长的任务可能饥饿的不足。

Lina et al. [19]：在分配过程中考虑了用户和雾节点的可靠性（按照上下文来看应该是类似权限的意思？），为用户分配匹配的雾节点。

Yang et al. [60]：考虑雾节点间的无线通信情况，降低该过程的能源消耗。

Stavrinides [61]：将通信密集型任务和计算密集型任务分别分配到雾节点和云节点上；优先保证任务及时完成，但提高了资金花费。

Auluck et al. [62]：根据任务的实时性将其分配在本地运行、雾上运行、云上运行。主要降低通信开销。

Abdelmoneem et al. [63]：同样是先评级再分配，[61]、[62]都是这个思路。

Zeng et al. [64]：优化最短完成时间，在建模中分为处理、I/O、通信三段来考虑。

Pooranian et al. [65]：将资源分配视为带惩罚值的二进制背包问题，主要关注能源消耗的优化（似乎和表中对不上）

Yang et al. [67]：使用了李雅普诺夫优化。

Xuan-Qui and Eui-Nam [69]：又是先评级再分配，通过遍历任务依赖/运行时间图来为任务确定优先级。

![](../图片/屏幕截图%202024-11-04%20192402.png)

### 超启发式算法

超启发式算法：每一次迭代，从多个启发式算法中选择一个使用

具有更高层次的泛化能力，可以解决单目标或多目标的优化问题。

Sabihe Kabirzadeh [72]：从粒子群、蚁群、遗传、模拟退火中选一个算法。

### 混合启发式算法

将两个以上的启发式算法结合起来，取长补短。

不过我还是不知道如何结合两个算法。

![](../图片/屏幕截图%202024-11-04%20202836.png)

### 元启发式算法

两个种类：基于遗传算法、基于群体智能

不知道为什么它们被归为元启发式算法，之前我都觉得它们是一般的启发式算法。

遗传算法的例子：GA

群体智能的例子：PSO、蜜蜂寿命算法（BLA）、ACO

一般来说，这类算法要求的计算时间较长。

Qianyu Liu [80]：采用了遗传算法

Wang et al. [81]：受人体免疫系统的自组织、协作、健壮性的启发。在任务调度问题中，设计了本地调度器和元调度器，后者负责感知周围雾节点的情况。（我的理解：没有掌握全局信息的全局调度器，每个节点只能感知周围的信息，在此基础上的合作和自组织。）

Binh Minh Nguyen et al. [82]：遗传算法。

Salim Bitam [83]：优点是比较稳定。

Dadmehr Rahbari et al. [84]：背包问题。

Jayasena and Thisarasinghe [85]：使用了鲸鱼算法[86]。

XU et al. [87]：基于松弛的算法（放缩？）、蚁群算法

![](../图片/屏幕截图%202024-11-04%20204545.png)

### 基于模糊逻辑的算法

模糊逻辑是用于处理系统中的不确定性、模糊、非数值信息的有力工具，且不易受环境改变的影响。

Mohammed Anis et al. [99]：用于对雾节点评分

[100]：使用模糊C聚类和粒子群方法将雾节点划分为集群。

Javanmardi [101]：将模糊逻辑作为粒子群算法中的fitness function。

![](../图片/屏幕截图%202024-11-04%20205551.png)

### 基于强化学习的算法

以任务和雾节点为环境、调度器为智能体。

强化学习算法已经用于解决车间生产调度问题[104]，与雾计算下的工作流调度有相似之处。

强化学习的基本要素：智能体、动作、环境、（智能体的）状态、奖励

Qing Wu [112]：将安全敏感任务在可信节点上执行

### 基于深度强化学习的算法

![](../图片/屏幕截图%202024-11-04%20211000.png)

## 统计与分析

![](../图片/屏幕截图%202024-11-04%20211412.png)

![](../图片/屏幕截图%202024-11-04%20211314.png)

## 未来研究方向

- 提高雾节点的资源利用效率
- 最优资源分配
- 并行调度
- 隐私和安全
- 感知上下文的服务提供（？）
- 能源消耗
- 自适应调度

## 我从这篇文章中学到的

雾计算环境下的三种调度问题和不同类型的的调度算法。（虽然我目前的研究方向集中于任务切换机制而非调度算法，但可以适当了解）

调度问题的各种性能指标。（这个对我现在的研究方向也很有用）

## 对该文章的评价

文章对调度问题、调度算法的分类很有用，对每个类别的调度算法基于优化指标等类别列的表格也条理清晰。

但文章对调度算法的分类存在条理不清晰的问题，例如，“整数线性规划”类别代表的是建模方式，而“启发式算法”“强化学习算法”类别代表的是求解方式，而文章将它们放在了同一分类的不同类别。其实可以对建模方式和求解方式分别分类。
